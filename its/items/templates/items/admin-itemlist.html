{% extends "base.html" %}

    {% block head %}
    <script src="{{ STATIC_URL }}js/admin-itemlist.js"></script>
    {% endblock %}


{% block content %}
    <h2>Admin Items</h2>
    <div class="form-inline" role="form">
        <form action="" method="get">
            {% csrf_token %}
            {{ ItemFilter.select_location|bootstrap }}
            {{ ItemFilter.select_category|bootstrap }}
            {{ ItemFilter.sort_by|bootstrap }}
            {{ ItemFilter.display_is_valuable_only|bootstrap }}
            {{ ItemFilter.display_archived_only|bootstrap }}
            {{ ItemFilter.search_keyword_or_name|bootstrap }}
            <input type="submit" name="action" value="Filter" />
            <input type="submit" name="action" value="Reset" />
        </form>
     </div>
    
    <form action ="" method="post">
        {% csrf_token %}
    <table class="table table-condensed table-striped">
        <tr><th>Select</th>
            <th>Found on</th>
            <th>Found by</th>
            <th>Location</th>
            <th>Category</th>
            <th>Description</th>
            <th>Valuable</th>
            <th>Possible owner</th>
            <th>Possible owner contacted</th>
            <th>Returned to</th>
            <th>Last action</th>
            <th>Last action performed on</th>
            <th>Last action notes</th>
            <th>Last action taken by</th>
            <th>Archive<input type="checkbox" name="select_all" value="" id="select_all"></th></tr>
        {% for item in items %}
            {% if item.is_valuable %}
                <tr class="danger">
            {% else %}
                <tr>
            {% endif %}
            <th><a href="{% url 'view_item' item.pk %}">View</a> <a href="{% url 'admin-action' item.pk %}">Action</a></th>
            <th>{{ item.found_on }}</th>
            <th>{{ item.found_by }}</th>
            <th>{{ item.location }}</th>
            <th>{{ item.category }}</th>
            <th>{{ item.description }}</th>
            <th>{{ item.is_valuable }}</th>
            <th>{{ item.possible_owner }}</th>
            <th>{{ item.possible_owner_contacted }}</th>
            <th>{{ item.returned_to }}</th>
            <th>{{ item.last_status.action_taken }}</th>
            <th>{{ item.last_status.timestamp }}</th>
            <th>{{ item.last_status.note }}</th>
            <th>{{ item.last_status.performed_by }}</th>
            <th><input type="checkbox" name="choices" value="{{ item.pk }}" class="checkbox_archive"></th></tr>
        {% endfor %}
     </table>
     <input type="submit" name="action" value="Archive selected items" />
     </form>
{% endblock %}